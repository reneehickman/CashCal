(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,a,t){},134:function(e,a,t){},135:function(e,a,t){},145:function(e,a,t){},146:function(e,a,t){},147:function(e,a,t){},148:function(e,a,t){},161:function(e,a,t){},162:function(e,a,t){},164:function(e,a,t){},165:function(e,a,t){},166:function(e,a,t){},167:function(e,a,t){},168:function(e,a,t){},169:function(e,a,t){},170:function(e,a,t){},183:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(23),l=t.n(c),s=(t(100),t(49)),o=t(22),i=t(94),u=t(90),m=(t(103),u.initializeApp({apiKey:"AIzaSyBMow1ngsOz_RwerAKJDZ-l9rOhtx2vkRY",authDomain:"cashcalpersonal.firebaseapp.com",databaseURL:"https://cashcalpersonal.firebaseio.com",projectId:"cashcalpersonal",storageBucket:"cashcalpersonal.appspot.com",messagingSenderId:"503814664445",appId:"1:503814664445:web:cb70ffa13bf81aed"})),d=r.a.createContext(),h=t(7),p=t.n(h),v=t(9),g=t(38),f=t(30),E=t(31),b=t(34),w=t(32),C=t(35),y=t(187),N=t(184),S=t(15),k=t.n(S);function x(e){return O.apply(this,arguments)}function O(){return(O=Object(v.a)(p.a.mark(function e(a){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/cashCal/diary/".concat(a),e.prev=1,e.next=4,k.a.get(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function j(e,a){return k.a.post("/api/cashCal/diary/".concat(e),a)}function I(e){return D.apply(this,arguments)}function D(){return(D=Object(v.a)(p.a.mark(function e(a){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/cashCal/weight/".concat(a),e.prev=1,e.next=4,k.a.get(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function L(e,a){return k.a.post("/api/cashCal/weight/".concat(e),a)}function W(e){return F.apply(this,arguments)}function F(){return(F=Object(v.a)(p.a.mark(function e(a){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/cashCal/user/".concat(a),e.prev=1,e.next=4,k.a.get(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function U(e,a){return k.a.post("/api/cashCal/user/".concat(e),a)}function R(e,a){return k.a.put("/api/cashCal/user/".concat(e),a)}function G(){return H.apply(this,arguments)}function H(){return(H=Object(v.a)(p.a.mark(function e(){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/cashCal/rewards",e.prev=1,e.next=4,k.a.get("/api/cashCal/rewards");case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function A(e,a){return B.apply(this,arguments)}function B(){return(B=Object(v.a)(p.a.mark(function e(a,t){var n,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/cashCal/user/".concat(a),e.prev=1,e.next=4,k.a.put(n,t);case 4:return r=e.sent,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}var P=function(e){function a(){var e,t;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(b.a)(this,(e=Object(w.a)(a)).call.apply(e,[this].concat(r)))).state={name:"",gender:"",age:"",heightFeet:"",heightInches:"",weight:""},t.handleChange=function(e){return t.setState(Object(g.a)({},e.target.name,e.target.value))},t.handleSignUp=function(){var e=Object(v.a)(p.a.mark(function e(a){var n,r,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.target.elements,r=n.email,c=n.password,e.prev=2,e.next=5,m.auth().createUserWithEmailAndPassword(r.value,c.value).then(function(e){var a=e.user.uid,n=t.state,r=n.name,c=n.gender,l=n.age,s=n.heightFeet,o=n.heightInches,i=n.weight;U(a,{name:r,gender:c,age:l,userHeight:parseInt(s)+parseInt(o)}),L(a,{weight:i}),t.setState({name:"",gender:"",age:"",heightFeet:"",heightInches:"",weight:""}),t.props.history.push("/dashboard")});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),alert(e.t0);case 10:case"end":return e.stop()}},e,null,[[2,7]])}));return function(a){return e.apply(this,arguments)}}(),t}return Object(C.a)(a,e),Object(E.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.a,{className:"signUpForm",onSubmit:this.handleSignUp},r.a.createElement(y.a.Group,{controlId:"name"},r.a.createElement(y.a.Label,null,"Name"),r.a.createElement(y.a.Control,{required:!0,name:"name",type:"text",value:this.state.name,onChange:this.handleChange,placeholder:"Name"})),r.a.createElement(y.a.Group,{controlId:"email"},r.a.createElement(y.a.Label,null,"Email address"),r.a.createElement(y.a.Control,{name:"email",type:"email",placeholder:"Email"})),r.a.createElement(y.a.Group,{controlId:"password"},r.a.createElement(y.a.Label,null,"Password"),r.a.createElement(y.a.Control,{name:"password",type:"password",placeholder:"Password"})),r.a.createElement(y.a.Group,{controlId:"gender"},r.a.createElement(y.a.Label,null,"Gender"),r.a.createElement(y.a.Control,{as:"select",name:"gender",value:this.state.gender,onChange:this.handleChange},r.a.createElement("option",{value:""},"Choose"),r.a.createElement("option",{value:"male"},"Male"),r.a.createElement("option",{value:"female"},"Female"))),r.a.createElement(y.a.Group,{controlId:"age"},r.a.createElement(y.a.Label,null,"Age"),r.a.createElement(y.a.Control,{name:"age",type:"text",value:this.state.age,onChange:this.handleChange})),r.a.createElement(y.a.Group,{controlId:"heightFeet"},r.a.createElement(y.a.Label,null,"Height"),r.a.createElement(y.a.Control,{as:"select",name:"heightFeet",value:this.state.heightFeet,onChange:this.handleChange},r.a.createElement("option",{value:""},"Feet"),r.a.createElement("option",{value:"36"},"3'"),r.a.createElement("option",{value:"48"},"4'"),r.a.createElement("option",{value:"60"},"5'"),r.a.createElement("option",{value:"72"},"6'"),r.a.createElement("option",{value:"84"},"7'")),r.a.createElement(y.a.Control,{as:"select",name:"heightInches",value:this.state.heightInches,onChange:this.handleChange},r.a.createElement("option",{value:""},"Inches"),r.a.createElement("option",{value:"0"},'0"'),r.a.createElement("option",{value:"1"},'1"'),r.a.createElement("option",{value:"2"},'2"'),r.a.createElement("option",{value:"3"},'3"'),r.a.createElement("option",{value:"4"},'4"'),r.a.createElement("option",{value:"5"},'5"'),r.a.createElement("option",{value:"6"},'6"'),r.a.createElement("option",{value:"7"},'7"'),r.a.createElement("option",{value:"8"},'8"'),r.a.createElement("option",{value:"9"},'9"'),r.a.createElement("option",{value:"10"},'10"'),r.a.createElement("option",{value:"11"},'11"'))),r.a.createElement(y.a.Group,{controlId:"weight"},r.a.createElement(y.a.Label,null,"Weight (lbs)"),r.a.createElement(y.a.Control,{name:"weight",type:"text",value:this.state.weight,onChange:this.handleChange})),r.a.createElement(N.a,{variant:"primary",className:"btn btn-block",type:"submit"},"Sign Up")))}}]),a}(n.Component),K=Object(o.e)(P),M=Object(o.e)(function(e){var a=e.history,t=Object(n.useCallback)(function(){var e=Object(v.a)(p.a.mark(function e(t){var n,r,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,r=n.email,c=n.password,e.prev=2,e.next=5,m.auth().signInWithEmailAndPassword(r.value,c.value);case 5:a.push("/dashboard"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0);case 11:case"end":return e.stop()}},e,null,[[2,8]])}));return function(a){return e.apply(this,arguments)}}(),[a]);return r.a.createElement("div",null,r.a.createElement(y.a,{onSubmit:t},r.a.createElement(y.a.Group,{controlId:"formBasicEmail"},r.a.createElement(y.a.Label,null,"Email address"),r.a.createElement(y.a.Control,{name:"email",type:"email",placeholder:"Email"})),r.a.createElement(y.a.Group,{controlId:"formBasicPassword",className:"mb-3"},r.a.createElement(y.a.Label,null,"Password"),r.a.createElement(y.a.Control,{name:"password",type:"password",placeholder:"Password"})),r.a.createElement(N.a,{variant:"primary",className:"btn btn-block signinbtn",type:"submit"},"Login")))}),_=(t(134),t(135),function(){return r.a.createElement("div",{className:"footerHome"},r.a.createElement("form",{action:"https://github.com/reneehickman/CashCal"},r.a.createElement("button",{type:"submit",value:"GitHub Repo",className:"btn btn-sm repo"},r.a.createElement("i",{className:"fa fa-code","aria-hidden":"true"})," Github Repo")))}),T=t(189),q=t(185),Y=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"homeBodyContent"},r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("img",{alt:"logo",className:"logoLg","max-width":"100%",src:"./images/cashcalLg.png"}),r.a.createElement("h4",{className:"intro-text"},"Please login or sign up to get started!")),r.a.createElement("div",{className:"home-container container col-lg-7 col-md-9 col-sm-12"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 col-lg-10 col-sm-12 tab-col"},r.a.createElement(T.a,{defaultActiveKey:"login",id:"tab-container"},r.a.createElement(q.a,{eventKey:"login",title:"Login"},r.a.createElement(M,null)),r.a.createElement(q.a,{eventKey:"signup",title:"Sign Up"},r.a.createElement(K,null))))))))),r.a.createElement(_,null))},z=t(26),J=(t(145),function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"currentWeight"},e.userCalories),r.a.createElement("div",{className:"currentText"},"DAILY CALORIES REMAINING")),r.a.createElement("div",{className:"col diarybutton"},r.a.createElement("div",{className:"input-group-append float-right"}))))}),V=(t(146),function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"currentWeight"},e.currentWeight),r.a.createElement("div",{className:"currentText"},"CURRENT WEIGHT")),r.a.createElement("div",{className:"col"},r.a.createElement("form",{onSubmit:e.handleWeightSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"my-1 mr-2",htmlFor:"weight"},"Log Weight (lbs)"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{className:"form-control",type:"text",name:"weight",onChange:e.handleChange,value:e.weight}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-danger weightlog",type:"submit"},"Submit"))))))),r.a.createElement("div",{className:"row rowHeader"},r.a.createElement("div",{className:"col headerWeight"},"Weight"),r.a.createElement("div",{className:"col headerDate"},"Date")),r.a.createElement("div",{className:"row"},e.previousWeights.map(function(e){return r.a.createElement("div",{key:e.id,className:"row rowBody"},r.a.createElement("div",{className:"col colWeight"},e.weight),r.a.createElement("div",{className:"col colDate"},e.updatedAt.slice(0,10)))})))}),Z=t(188),X=t(186),Q=t(190),$=(t(147),function(e){var a=e.handleChange,t=e.handleSubmit,n=e.value;return r.a.createElement("div",null,r.a.createElement("form",{className:"form-centered",onSubmit:t},r.a.createElement("label",{htmlFor:"searchBar"},"Search by Food Name"),r.a.createElement("input",{onChange:a,type:"text",name:"foodKeyword",value:n}),r.a.createElement("button",null,"Search")))}),ee=(t(148),function(e){return"".concat(e.split(" ")[1]," ").concat(e.split(" ")[2]," ").concat(e.split(" ")[3])}),ae=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(N.a,{variant:"danger btn-block searchbutton",onClick:e.handleShow},"Search for a food"),r.a.createElement("div",{className:"directionstext"}," ","or manually enter the information below"),r.a.createElement(Z.a,{show:e.show,onHide:e.handleClose},r.a.createElement(Z.a.Header,{closeButton:!0},r.a.createElement(Z.a.Title,null,"Food Search")),r.a.createElement(Z.a.Body,{style:{maxHeight:"calc(100vh - 210px)",overflowY:"auto"}},r.a.createElement(X.a,null,r.a.createElement($,{handleChange:e.handleSearchChange,handleSubmit:e.handleSearchSubmit,value:e.foodKeyword})),r.a.createElement(Q.a.Title,null,r.a.createElement("b",null,"Searched:",e.cardHeader)),e.foodsList.map(function(a){return r.a.createElement(Q.a,{key:a.id,style:{width:"18rem"}},r.a.createElement(Q.a.Text,null,a.name),r.a.createElement(N.a,{onClick:e.handleSearchClick,id:a.id,variant:"primary"},"Select this food"))})),r.a.createElement(Z.a.Footer,null,r.a.createElement(N.a,{variant:"secondary",onClick:e.handleClose},"Close"))),r.a.createElement("div",{className:"formWrapper"},r.a.createElement("div",{className:"formContain"},r.a.createElement(y.a,{className:"mealForm",onSubmit:e.handleDiarySubmit},r.a.createElement(y.a.Group,{className:"logRow",controlId:"meal"},r.a.createElement(y.a.Label,{className:"loglabel"},"Meal"),r.a.createElement(y.a.Control,{required:!0,name:"meal",type:"text",value:e.meal,onChange:e.handleChange,placeholder:"Meal"})),r.a.createElement(y.a.Group,{className:"logRow",controlId:"description"},r.a.createElement(y.a.Label,{className:"loglabel"},"Description"),r.a.createElement(y.a.Control,{name:"description",type:"description",onChange:e.handleChange,value:e.description,placeholder:"Description"})),r.a.createElement(y.a.Group,{className:"logRow",controlId:"calories"},r.a.createElement(y.a.Label,{className:"loglabel"},"Calories"),r.a.createElement(y.a.Control,{name:"calories",type:"calories",onChange:e.handleChange,value:e.calories,placeholder:"Calories"})),r.a.createElement(N.a,{variant:"danger",className:"mealSubmit btn btn-block",type:"submit"},"Submit")))),r.a.createElement("div",{className:"row diaryRowHeader"},r.a.createElement("div",{className:"col-md-3 headerMeal"},"Meal"),r.a.createElement("div",{className:"col-md-3 headerDescr"},"Description"),r.a.createElement("div",{className:"col headerCal"},"Calories")),r.a.createElement("div",null,e.diary.map(function(e){var a=ee(new Date(Date.now()).toString());return ee(new Date(e.createdAt).toString())===a&&r.a.createElement("div",{className:"row diaryBody",key:e.id},r.a.createElement("div",{className:"col-sm meal"},r.a.createElement("p",null,e.meal)),r.a.createElement("div",{className:"col-sm descr"},r.a.createElement("p",null,e.description)),r.a.createElement("div",{className:"col-sm cal"},r.a.createElement("p",null,e.calories)),r.a.createElement("div",null,r.a.createElement(N.a,{id:e.id,variant:"danger",className:"deletefood"},"delete this food")))})))},te=(t(161),function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"diaryHeader"},"Diary Log"),r.a.createElement(ae,{meal:e.meal,description:e.description,calories:e.calories,handleChange:e.handleChange,handleDiarySubmit:e.handleDiarySubmit,modalSubmit:e.modalSubmit,getFacts:e.getFacts,getFood:e.getFood,handleClose:e.handleClose,handleSearchChange:e.handleSearchChange,handleSearchClick:e.handleSearchClick,handleSearchSubmit:e.handleSearchSubmit,handleShow:e.handleShow,foodKeyword:e.foodKeyword,foodsList:e.foodsList,cardHeader:e.cardHeader,show:e.show,diary:e.diary}))}),ne=(t(162),t(54)),re=t.n(ne),ce=function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"currentWeight"},e.points),r.a.createElement("div",{className:"currentText"},"REWARDS BALANCE")),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"input-group-append float-right"},r.a.createElement(re.a,{className:"redeemrewards",variant:"danger",href:"/rewards"},"Redeem Rewards"))))},le=(t(164),function(e){return 66+6.2*e.currentWeight+12.7*e.height-6.76*e.age}),se=function(e){return 655.1+4.35*e.currentWeight+4.7*e.height-4.7*e.age},oe=function(e){return e[e.length-1].weight},ie=function(e){return"".concat(e.split(" ")[1]," ").concat(e.split(" ")[2]," ").concat(e.split(" ")[3])},ue=function(e){function a(e,t){var n;return Object(f.a)(this,a),(n=Object(b.a)(this,Object(w.a)(a).call(this,e,t))).state={userId:n.props.userId,user_name:"",gender:"",age:0,height:0,points:0,currentWeight:0,previousWeights:[],userCalories:0,weight:"",diary:[],meal:"",description:"",calories:0,foodKeyword:"",cardHeader:"",foodsList:[],show:!1},n.loadUser=function(){var e=Object(v.a)(p.a.mark(function e(a){var t,r,c,l,s,o,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(a);case 3:t=e.sent,r=t.data[0],c=r.user_name,l=r.gender,s=r.age,o=r.height,i=r.points,n.setState({user_name:c,gender:l,age:parseInt(s),height:parseInt(o),points:parseInt(i)}),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(a){return e.apply(this,arguments)}}(),n.calculateCalories=function(e){return"male"===e.gender?n.setState({userCalories:Math.round(le(e))}):n.setState({userCalories:Math.round(se(e))})},n.loadWeight=function(){var e=Object(v.a)(p.a.mark(function e(a){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(a);case 3:t=e.sent,n.setState({currentWeight:oe(t.data),previousWeights:t.data}),n.calculateCalories(n.state),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(a){return e.apply(this,arguments)}}(),n.updateCalories=function(e,a){e.forEach(function(e){var t=ie(new Date(Date.now()).toString());ie(new Date(e.createdAt).toString())===t&&(a-=e.calories)}),n.setState({userCalories:a})},n.handleChange=function(e){return n.setState(Object(g.a)({},e.target.name,e.target.value))},n.handleWeightSubmit=function(e){e.preventDefault();var a=n.state,t=a.userId,r=a.weight,c=n.state.points;L(t,{weight:r}),n.setState({weight:""}),n.loadWeight(t),I(t).then(function(e){n.setState({currentWeight:oe(e.data),previousWeights:e.data}),n.calculateCalories(n.state)}),R(t,{points:c+=25}).then(function(e){return W(t).then(function(e){var a=e.data[0].points;n.setState({points:a})})})},n.handleDiarySubmit=function(e){e.preventDefault();var a=n.state.userId,t=n.state,r=t.points,c=t.userCalories;j(a,n.state),n.setState({meal:"",description:"",calories:""}),R(a,{points:r+=5}).then(function(e){W(a).then(function(e){var a=e.data[0].points;n.setState({points:a})}),x(a).then(function(e){var a=e.data,t=a.length-1;c-=a[t].calories,n.setState({diary:a,userCalories:c})})})},n.getFood=function(){var e=Object(v.a)(p.a.mark(function e(a){var t,r,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("https://api.nal.usda.gov/ndb/search/?format=json&q=".concat(a,"&sort=n&max=25&offset=0&api_key=6fDIrXqchfLy0iPmxZD8eSYlduVoCjOxkGhaUsoH"));case 3:t=e.sent,r=t.data.list.item,c=r.map(function(e){return{name:e.name,serving:e.unit,id:e.ndbno}}),n.setState({foodsList:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(a){return e.apply(this,arguments)}}(),n.handleSearchSubmit=function(e){e.preventDefault();var a=n.state.foodKeyword;""===a&&console.error("error invalid food name"),n.getFood(a),n.setState({cardHeader:a,foodKeyword:""})},n.handleSearchChange=function(e){var a=e.target,t=a.name,r=a.value;n.setState(Object(g.a)({},t,r))},n.handleSearchClick=function(e){var a=e.target.id;n.getFacts(a),alert("food added"),n.setState({meal:"",description:"",calories:""})},n.getFacts=function(){var e=Object(v.a)(p.a.mark(function e(a){var t,r,c,l,s,o,i,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("https://api.nal.usda.gov/ndb/V2/reports?ndbno=".concat(a,"&type=b&format=json&api_key=6fDIrXqchfLy0iPmxZD8eSYlduVoCjOxkGhaUsoH"));case 3:t=e.sent,r=t.data.foods[0].food.nutrients,c=t.data.foods[0].food.desc.name,l=r.filter(function(e){return"Energy"===e.name&&"kcal"===e.unit}),s=l[0].value,o=l[0].measures[0].label,i=l[0].measures[0].qty,u=i+o,n.setState({calories:s,description:u,meal:c},function(){n.modalSubmit(n.state)}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("error getting facts");case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(a){return e.apply(this,arguments)}}(),n.modalSubmit=function(e){var a=n.state.userId,t=n.state,r=t.points,c=t.userCalories;j(a,e),n.setState({meal:"",description:"",calories:""}),R(a,{points:r+=5}).then(function(e){W(a).then(function(e){var a=e.data[0].points;n.setState({points:a})}),x(a).then(function(e){var a=e.data,t=a.length-1;c-=a[t].calories,n.setState({diary:a,userCalories:c})})})},n.handleShow=n.handleShow.bind(Object(z.a)(Object(z.a)(n))),n.handleClose=n.handleClose.bind(Object(z.a)(Object(z.a)(n))),n}return Object(C.a)(a,e),Object(E.a)(a,[{key:"componentDidMount",value:function(){this.loadUser(this.props.userId),this.loadWeight(this.props.userId),this.loadDiary(this.props.userId)}},{key:"loadDiary",value:function(){var e=Object(v.a)(p.a.mark(function e(a){var t,n,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(a);case 3:t=e.sent,this.setState({diary:t.data}),n=this.state.diary,r=this.state.userCalories,this.updateCalories(n,r),n.forEach(function(e){var a=ie(new Date(Date.now()).toString());ie(new Date(e.createdAt).toString())===a&&(r-=e.calories)}),this.setState({userCalories:r}),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(a){return e.apply(this,arguments)}}()},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"render",value:function(){return r.a.createElement("div",{className:"dashBodyContent"},r.a.createElement("div",{className:"row dash-container container-fluid mx-0 px-0 mt-3"},r.a.createElement("div",{className:"col-md-5 leftCol"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col "},r.a.createElement("div",{className:"card cardLook"},r.a.createElement("div",{className:"card-body"},r.a.createElement(J,{userCalories:this.state.userCalories}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col "},r.a.createElement("div",{className:"card cardLook"},r.a.createElement("div",{className:"card-body"},r.a.createElement(V,{handleWeightSubmit:this.handleWeightSubmit,handleChange:this.handleChange,weight:this.state.weight,previousWeights:this.state.previousWeights,currentWeight:this.state.currentWeight}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card cardLook"},r.a.createElement("div",{className:"card-body"},r.a.createElement(ce,{points:this.state.points})))))),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("div",{className:"card cardLook"},r.a.createElement("div",{className:"card-body"},r.a.createElement(te,{diary:this.state.diary,meal:this.state.meal,description:this.state.description,calories:this.state.calories,handleChange:this.handleChange,handleDiarySubmit:this.handleDiarySubmit,modalSubmit:this.modalSubmit,getFacts:this.getFacts,getFood:this.getFood,handleClose:this.handleClose,handleSearchChange:this.handleSearchChange,handleSearchClick:this.handleSearchClick,handleSearchSubmit:this.handleSearchSubmit,handleShow:this.handleShow,foodKeyword:this.state.foodKeyword,foodsList:this.state.foodsList,cardHeader:this.state.cardHeader,show:this.state.show}))))))}}]),a}(n.Component),me=function(e){var a=e.currentUser,t=e.path;return r.a.createElement(o.a,{exact:!0,path:t,render:function(){return a?r.a.createElement(ue,{userId:a.uid}):r.a.createElement(Y,null)}})},de=(t(165),t(166),t(167),function(e){var a=e.reward,t=e.handlePurchase;return r.a.createElement("div",{className:"col-lg-3 col-sm-6 mb-3"},r.a.createElement("div",{className:"card"},r.a.createElement("img",{src:a.image,className:"card-img-top cardimg",alt:a.title}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title cardtitle"},a.title),r.a.createElement("p",{className:"card-text"},a.description),r.a.createElement("p",{className:"card-text"},a.points," Points"),r.a.createElement("div",{className:"buttonscontain"},r.a.createElement("a",{href:a.link,className:"btn btn-danger linkbtn rewardsbtns ",target:"_blank",rel:"noopener noreferrer"},"Link"),r.a.createElement("button",{className:"btn btn-success rewardsbtns ","data-cost":a.points,onClick:t},"Buy")))))}),he=function(e){function a(){var e,t;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(b.a)(this,(e=Object(w.a)(a)).call.apply(e,[this].concat(r)))).state={rewards:[],user_name:"",points:0,message:""},t.loadUser=function(){var e=Object(v.a)(p.a.mark(function e(a){var n,r,c,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(a);case 3:n=e.sent,r=n.data[0],c=r.user_name,l=r.points,t.setState({user_name:c,points:l}),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(a){return e.apply(this,arguments)}}(),t.handlePurchase=function(){var e=Object(v.a)(p.a.mark(function e(a){var n,r,c,l,s,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props.currentUser.uid,r=a.target.dataset.cost,c=t.state.points,!((l=c-r)>=0)){e.next=19;break}return e.prev=5,A(n,{points:l}),e.next=9,W(n);case 9:s=e.sent,o=s.data[0].points,t.setState({points:o,message:"Purchase Successful!"}),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),e.t0;case 17:e.next=20;break;case 19:t.setState({message:"Not enough points!"});case 20:case"end":return e.stop()}},e,null,[[5,14]])}));return function(a){return e.apply(this,arguments)}}(),t}return Object(C.a)(a,e),Object(E.a)(a,[{key:"componentDidMount",value:function(){this.loadRewards(),this.loadUser(this.props.currentUser.uid)}},{key:"componentDidUpdate",value:function(){this.loadUser(this.props.currentUser.uid)}},{key:"loadRewards",value:function(){var e=Object(v.a)(p.a.mark(function e(){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G();case 3:a=e.sent,this.setState({rewards:a.data}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"rewardbody"},r.a.createElement("div",{className:"rewardBodyContent"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,this.state.user_name,"'s CashCal Rewards Balance:"," ",r.a.createElement("strong",{className:"pointsTotal"},this.state.points)," ")),r.a.createElement("div",{className:"message"},r.a.createElement("h5",null,this.state.message)),r.a.createElement("div",{className:"rewardCardWrapper container-fluid"},r.a.createElement("div",{className:"row"},(e=this.state.rewards,a=this.handlePurchase,e.map(function(e){return r.a.createElement(de,{key:e.id,reward:e,handlePurchase:a})}))))));var e,a}}]),a}(n.Component),pe=(t(168),function(){var e=Object(n.useContext)(d).currentUser?"footer":"hideFooter";return r.a.createElement("div",{className:e},r.a.createElement("form",{action:"https://github.com/reneehickman/CashCal"},r.a.createElement("button",{type:"submit",value:"GitHub Repo",className:"btn btn-sm repo"},r.a.createElement("i",{className:"fa fa-code","aria-hidden":"true"})," Github Repo")))}),ve=(t(169),t(42)),ge=t.n(ve),fe=t(43),Ee=t.n(fe),be=(t(170),function(){m.auth().signOut()}),we=function(){return r.a.createElement(re.a,{className:"logout",variant:"light",onClick:be,children:"Log Out",href:"/"},"Logout")};var Ce=function(){var e=Object(n.useContext)(d).currentUser?"main":"hideNav";return r.a.createElement("div",{className:e},r.a.createElement(ge.a,{className:"navbarBg navbar-dark",expand:"lg"},r.a.createElement(ge.a.Brand,{href:"/dashboard"},r.a.createElement("img",{alt:"logo",className:"logo",src:"./images/cashcal.png"})),r.a.createElement(ge.a.Toggle,{"aria-controls":"basic-navbar-nav",className:"custom-toggler"}),r.a.createElement(ge.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(Ee.a,{className:"mr-auto"},r.a.createElement(Ee.a.Link,{className:"navlink navs",href:"/dashboard"},"My Dashboard"),r.a.createElement(Ee.a.Link,{className:"navlink navs",href:"/rewards"},"Rewards")),r.a.createElement(Ee.a,{className:"pull-right"},r.a.createElement(we,null)))))},ye=function(){var e=Object(n.useContext)(d).currentUser,a=e?"/dashboard":"/";return r.a.createElement("div",{className:"bodyContent"},r.a.createElement(Ce,null),r.a.createElement(s.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(o.c,null,r.a.createElement(me,{path:a,currentUser:e}),r.a.createElement(o.a,{exact:!0,path:"/rewards",render:function(a){return r.a.createElement(he,Object.assign({},a,{currentUser:e}))}})))),r.a.createElement(pe,null))};l.a.render(r.a.createElement(function(e){var a=e.children,t=Object(n.useState)(null),c=Object(i.a)(t,2),l=c[0],s=c[1];return Object(n.useEffect)(function(){m.auth().onAuthStateChanged(s)},[]),r.a.createElement(d.Provider,{value:{currentUser:l}},a)},null,r.a.createElement(ye,null)),document.getElementById("root"))},95:function(e,a,t){e.exports=t(183)}},[[95,1,2]]]);
//# sourceMappingURL=main.547adeb2.chunk.js.map